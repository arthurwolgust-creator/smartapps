<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Le co√ªt cach√© du reporting manuel (MyReport)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style> body { background:#f5f7fb } </style>
</head>
<body>
  <div class="mx-auto max-w-3xl p-6 lg:p-8">
    <div class="mb-6 rounded-2xl bg-white p-5 shadow-sm ring-1 ring-[#0075F2]/15">
      <div class="flex items-center gap-3">
        <div class="flex h-12 w-12 items-center justify-center rounded-2xl" style="background:#0075F21A">
          <span class="text-xl" style="color:#0075F2">‚àë</span>
        </div>
        <div class="flex-1">
          <h1 class="text-2xl font-semibold text-gray-900">Le co√ªt cach√© du reporting manuel</h1>
          <p class="text-sm text-gray-600">D√©couvrez ce que repr√©sente chaque ann√©e le reporting manuel dans votre entreprise.</p>
        </div>
      </div>
    </div>

    <div id="app"></div>
  </div>

  <!-- React + ReactDOM UMD (production) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script>
  (function(){
    const { useState, useMemo } = React;

    // ---- Constantes & helpers ----
    const HOURLY_COST = 60; // ‚Ç¨/h (co√ªt horaire moyen charg√©)
    const FREQ_CHOICES = [
      { label: "Une fois par an", value: 1 },
      { label: "Deux fois par an", value: 2 },
      { label: "Une fois par trimestre", value: 4 },
      { label: "Tous les deux mois", value: 6 },
      { label: "Tous les mois", value: 12 },
      { label: "Deux fois par mois", value: 24 },
      { label: "Toutes les semaines", value: 42 }
    ];
    const eur = (n)=> n.toLocaleString("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0});
    const h = React.createElement;

    // ---- Stepper (‚Äì / input / +) ----
    function Stepper(props){
      const step = props.step || 1;
      const min  = props.min  != null ? props.min : 0;
      const max  = props.max  != null ? props.max : 99;
      const set  = (v)=> props.onChange(Math.max(min, Math.min(max, Math.round(v))));
      return h("div",{className:"inline-flex items-center gap-2 "+(props.className||"")},
        h("button",{
          type:"button",
          onClick:()=>set((props.value||0) - step),
          className:"h-9 w-9 rounded-xl border border-gray-200 bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#0075F2]"
        },"‚Äì"),
        h("input",{
          type:"number",
          inputMode:"numeric",
          pattern:"[0-9]*",
          value:Number.isFinite(props.value)?props.value:0,
          min, max, step,
          onChange:(e)=> set(parseFloat(e.target.value||"0")),
          className:"w-16 text-center rounded-2xl border border-gray-200 bg-white p-2 text-sm font-semibold text-gray-900 shadow-sm focus:outline-none focus:ring-2 focus:ring-[#0075F2]"
        }),
        h("button",{
          type:"button",
          onClick:()=>set((props.value||0) + step),
          className:"h-9 w-9 rounded-xl border border-gray-200 bg-white text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#0075F2]"
        },"+"),
        props.suffix ? h("span",{className:"text-xs text-gray-500 ml-1"}, props.suffix) : null
      );
    }

    // ---- App ----
    function App(){
      // Entr√©es
      const [freqIndex, setFreqIndex] = useState(4); // "Tous les mois" par d√©faut
      const [people, setPeople]   = useState(1);
      const [collect, setCollect] = useState(3);
      const [prep, setPrep]       = useState(6);
      const [format, setFormat]   = useState(3);
      const [fix, setFix]         = useState(2);

      const freq = FREQ_CHOICES[freqIndex] || FREQ_CHOICES[4];

      // Calculs
      const computed = useMemo(()=>{
        const hoursPerReportPerPerson = collect + prep + format + fix;
        const teamHoursPerReport = hoursPerReportPerPerson * people;
        const costPerReport = teamHoursPerReport * HOURLY_COST;
        const annualCost = costPerReport * freq.value;
        return { hoursPerReportPerPerson, teamHoursPerReport, costPerReport, annualCost };
      },[collect, prep, format, fix, people, freq]);

      return h(React.Fragment,null,
        // Bloc Variables
        h("div",{className:"mb-6 rounded-2xl bg-white p-5 shadow-sm ring-1 ring-gray-100"},
          // Fr√©quence
          h("div",{className:"mb-6"},
            h("div",{className:"mb-2 text-sm font-medium text-gray-800"},"√Ä quelle fr√©quence effectuez-vous votre reporting ?"),
            h("div",{className:"flex items-center gap-3"},
              h("input",{
                type:"range",min:0,max:FREQ_CHOICES.length-1,step:1,value:freqIndex,
                onChange:(e)=>setFreqIndex(parseInt(e.target.value,10)),
                className:"w-full accent-[#0075F2]"
              }),
              h("span",{className:"whitespace-nowrap rounded-lg bg-[#0075F2]/10 px-3 py-1 text-xs font-semibold text-[#0075F2]"},freq.label)
            ),
            h("div",{className:"mt-2 grid grid-cols-7 text-[10px] text-gray-500"},
              FREQ_CHOICES.map((c,i)=>h("div",{key:i,className:"flex items-center justify-center"},
                h("div",{className:(i===freqIndex?"bg-[#0075F2]":"bg-gray-300")+" h-1.5 w-1.5 rounded-full", title:c.label+" ("+c.value+"/an)"}))
              )
            ),
            h("div",{className:"mt-1 text-xs text-gray-500"},
              "Fr√©quence s√©lectionn√©e : ", h("b",null,String(freq.value))," / an"
            )
          ),
          // Personnes
          h("div",{className:"mb-6 grid grid-cols-1 gap-3 sm:grid-cols-2"},
            h("div",null,
              h("div",{className:"text-sm font-medium text-gray-800"},"Combien de personnes sont impliqu√©es ?"),
              h(Stepper,{value:people,onChange:setPeople,step:1,min:0,max:99,suffix:"pers"})
            )
          ),
          // √âtapes
          h("div",{className:"mt-2"},
            h("div",{className:"mb-2 text-sm font-semibold text-gray-900"},"Combien de temps prennent les op√©rations suivantes pour chaque reporting :"),
            h("div",{className:"grid grid-cols-12 items-end gap-3 text-xs font-medium text-gray-500"},
              h("div",{className:"col-span-7"},"Op√©ration"),
              h("div",{className:"col-span-5"},"Dur√©e ", h("span",{className:"text-gray-400"},"(heure(s))"))
            ),
            h("div",{className:"mt-2 grid grid-cols-12 items-center gap-3"},
              h("div",{className:"col-span-7 text-sm text-gray-800"},"Collecte des donn√©es"),
              h(Stepper,{className:"col-span-5",value:collect,onChange:setCollect,step:1,min:0,max:99,suffix:"heure(s)"})
            ),
            h("div",{className:"mt-2 grid grid-cols-12 items-center gap-3"},
              h("div",{className:"col-span-7 text-sm text-gray-800"},"Retraitement / Consolidation"),
              h(Stepper,{className:"col-span-5",value:prep,onChange:setPrep,step:1,min:0,max:99,suffix:"heure(s)"})
            ),
            h("div",{className:"mt-2 grid grid-cols-12 items-center gap-3"},
              h("div",{className:"col-span-7 text-sm text-gray-800"},"Mise en forme"),
              h(Stepper,{className:"col-span-5",value:format,onChange:setFormat,step:1,min:0,max:99,suffix:"heure(s)"})
            ),
            h("div",{className:"mt-2 grid grid-cols-12 items-center gap-3"},
              h("div",{className:"col-span-7 text-sm text-gray-800"},"Correction des erreurs"),
              h(Stepper,{className:"col-span-5",value:fix,onChange:setFix,step:1,min:0,max:99,suffix:"heure(s)"})
            )
          )
        ),
        // Bloc R√©sultats (plus bleu)
        h("div",{className:"rounded-2xl p-5 shadow-sm ring-1 ring-[#0075F2]/20", style:{background:"linear-gradient(135deg, #EAF3FF 0%, #F7FAFF 100%)"}},
          h("div",{className:"mb-3 text-sm font-semibold", style:{color:"#0B5FD7"}},"R√©sultats"),
          h("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-3"},
            h("div",{className:"rounded-xl bg-white/80 p-3 ring-1 ring-[#0075F2]/10 backdrop-blur-sm"},
              h("div",{className:"text-xs text-gray-600"},"Temps n√©cessaire pour sortir un reporting"),
              h("div",{className:"mt-1 text-xl font-semibold text-gray-900"}, String(Math.round(computed.teamHoursPerReport))+" h")
            ),
            h("div",{className:"rounded-xl bg-white/80 p-3 ring-1 ring-[#0075F2]/10 backdrop-blur-sm"},
              h("div",{className:"text-xs text-gray-600"},"Co√ªt pour sortir un reporting"),
              h("div",{className:"mt-1 text-xl font-semibold text-gray-900"}, eur(computed.costPerReport)),
              h("div",{className:"mt-1 text-[11px] text-gray-500"},"Base : "+HOURLY_COST+" ‚Ç¨/h")
            ),
            h("div",{className:"rounded-xl bg-white/80 p-3 ring-1 ring-[#0075F2]/10 backdrop-blur-sm"},
              h("div",{className:"text-xs text-gray-600"},"Co√ªt annuel du reporting manuel"),
              h("div",{className:"mt-1 text-xl font-semibold text-gray-900"}, eur(computed.annualCost)),
              h("div",{className:"mt-1 text-[11px] text-gray-500"},"Fr√©quence : "+freq.value+"/an")
            ),
            // üëâ CTA pleine largeur sous la ligne des 3 r√©sultats
            h("div",{className:"sm:col-span-3 col-span-1 mt-2"},
              h("a",{
                href:"https://www.myreport.fr/ressource/demo-myreport/?utm_source=repmanuel&utm_medium=Calculateur", target:"_blank", rel:"noopener",
                className:"inline-flex w-full items-center justify-center rounded-xl bg-[#0075F2] px-4 py-3 text-sm font-semibold text-white shadow-sm hover:brightness-110"
              },"√âconomisez-le avec MyReport")
            )
          )
        )
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("app"));
    root.render(React.createElement(App));

    // ---- Auto-resize pour int√©gration en iframe ----
    (function(){
      function postHeight(){
        var h = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);
        if (window.parent !== window) {
          // Compatibilit√© : 2 types de messages accept√©s par tes pages d'accueil/blog
          parent.postMessage({ type:'calc-resize', height:h }, '*');
          parent.postMessage({ type:'myreport-embed-resize', id:'reporting-manuel', height:h }, '*');
        }
      }
      var t; function debounced(){ clearTimeout(t); t = setTimeout(postHeight, 120); }
      if ("ResizeObserver" in window) {
        var ro = new ResizeObserver(debounced);
        ro.observe(document.documentElement); ro.observe(document.body);
      } else {
        setInterval(postHeight, 600);
      }
      window.addEventListener("load", postHeight);
      window.addEventListener("resize", debounced);
    })();
  })();
  </script>
</body>
</html>
